(function(){
function f(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}function g(a){if(!(a instanceof Array)){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=c?c.call(a):{next:f(a)};for(var b=[];!(c=a.next()).done;)b.push(c.value);a=b}return a}
var k="function"==typeof Object.assign?Object.assign:function(a,c){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=d[e])}return a},l="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)},p="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function q(a,c){if(c){var b=p;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&l(b,a,{configurable:!0,writable:!0,value:c})}}q("Object.assign",function(a){return a||k});q("Object.is",function(a){return a?a:function(c,b){return c===b?0!==c||1/c===1/b:c!==c&&b!==b}});
q("Array.prototype.includes",function(a){return a?a:function(c,b){var d=this;d instanceof String&&(d=String(d));var e=d.length;b=b||0;for(0>b&&(b=Math.max(b+e,0));b<e;b++){var h=d[b];if(h===c||Object.is(h,c))return!0}return!1}});
q("String.prototype.includes",function(a){return a?a:function(c,b){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(c,b||0)}});var r=this;
function t(a,c){a=a.split(".");var b=r;a[0]in b||"undefined"==typeof b.execScript||b.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===c?b[d]&&b[d]!==Object.prototype[d]?b=b[d]:b=b[d]={}:b[d]=c};function u(a,c){a.startSymbol("{[");a.endSymbol("]}");c.preAssignBindingsEnabled(!0)}u.$inject=["$interpolateProvider","$compileProvider"];u.module=angular.module("glueCommonConfig",[]);u.module.config(u);var v={DATA_REQUEST_URL:"requestUrl",TEMPLATE_EXTENSION:"templateExtension",TEMPLATE_PATH:"templatePath"};function w(a,c){var b=Object.assign({},c);Object.keys(v).forEach(function(d){var e=document.body.dataset;e&&(e=e[v[d]],null!=e&&(b[d]=e))});a.constant("glueOctoConfig",b)}w.$inject=["$provide","glueOctoConfig"];
var x=angular.module("glueOctopusConfiguration",[u.module.name]).constant("glueOctoConfig",Object.assign({},{DATA_REQUEST_URL:"/data/",TEMPLATE_EXTENSION:".tpl",TEMPLATE_PATH:"/templates/",TEMPLATE_STRINGS:{}}));var y=["admob.google.com","ads.google.com","adwords.google.com","www.google.com"],z=["http:","https:","tel:"];function A(a){try{var c=new URL(a,document.location.href)}catch(b){return!1}return z.includes(c.protocol)?""==c.hostname||c.hostname==document.location.hostname?!0:y.includes(c.hostname):!1}function B(a){return!!a&&3==a.nodeType}
function C(a){var c=document.createDocumentFragment();a.split("[s%|").forEach(function(b){b=b.split("|e%]");if(1<b.length){var d=document.createElement("span");d.innerText=b.shift();d.style.whiteSpace="nowrap";var e=document.createElement("span");e.style.display="inline-block";c.appendChild(d);c.appendChild(e)}c.appendChild(document.createTextNode(b[0]))});return c};function D(a,c,b){this.a=a;this.b=c;a=this.b.content;null!=a&&(b?(b=C(a),this.a.empty()[0].appendChild(b)):this.a.text(a))};function E(a){this.a=a;this.a.css("display","none")};function F(a,c){this.b=a;this.a=c;a=this.a.src;null!=a&&A(a)&&this.b.attr("src",a)};function G(a,c,b){this.a=a;this.b=c;c=this.b.content;a=this.b.link;null!=c&&(b?(b=C(c),this.a.empty()[0].appendChild(b)):this.a.text(c));null!=a&&A(a)&&this.a.attr("href",a)};var H=/^(([a-z]{2})-([a-z]{1,6})-([a-z0-9]{1,5})-([a-z0-9]{1,3})-([a-z]{1,5})-([mcta]))-([a-z0-9_]+)(?:-([a-z0-9_]+))?!o2(?:~(.*))?$/,I=/^(([a-z]{2})-([a-z]{1,6})-([a-z0-9]{1,5})-([a-z]{1,5})(?:-([a-z]+))?-([mcta]))-([a-z0-9_]+)(?:-([a-z0-9_]+))?!o3(?:~(.*))?$/,J="3p adoff adon cm co di em et ev fm gdn gp gxbo ha ns offdi offha or ot pa ref sm te xs z".split(" "),K="am as aw awx awa ga ae bizsol gfw gmb mp pp wt yt z".split(" "),L="aap ba bc bi cb cpc da dev dm edm el fb fl g gdn gr ii in int le li mi mv nv off ot pc sp tw wg wp xi ya yx".split(" ");
function M(a){this.f=a;this.c=!1;this.a=null;this.b=0;a=this.f.search();var c=null;null!=a&&(c=a.subid||"");a=c?c:(document.location.search.split("subid=")[1]||"").split("&")[0];try{var b=decodeURIComponent(a)}catch(d){b=a}"string"===typeof b&&(a=b.match(H),null==a?(a=b.match(I),null!=a&&(this.b=3,b={G:b,l:a[1],B:a[2],language:a[3],channel:a[4],product:a[5],J:a[6],H:a[7],v:a[8],L:a[9]},J.includes(b.channel)&&K.includes(b.product)&&(this.a=b,this.c=!0))):(this.b=2,b={G:b,l:a[1],B:a[2],language:a[3],
channel:a[4],source:a[5],product:a[6],H:a[7],j:a[8],K:a[9],I:a[10]},J.includes(b.channel)&&L.includes(b.source)&&K.includes(b.product)&&(16<b.j.length&&(b.j=b.j.substr(0,16)),this.a=b,this.c=!0)))}M.$inject=["$location"];function N(a,c,b,d,e,h,m,n){this.b=c;this.a=a;this.D=b;this.F=d;this.s=e;this.f=h;this.C=n;this.c="";this.g=null;this.i="";this.h=null;O(this,m)}function O(a,c){P(a,!1);a.c=c.template;a.g=c.variables;a.i=c.mode;(c=Q(a,a.c))?R(a,c):a.F(a.f.TEMPLATE_PATH+a.c+a.f.TEMPLATE_EXTENSION).then(function(b){R(a,b)})}function R(a,c){a.b.$applyAsync(function(){S(a,c)})}
function S(a,c){a.b.subid=a.s;a.b.octoVars=a.g;var b=a.D(c)(a.b);a.h=b;switch(a.i){case "append":a.a.append(b);break;case "replace":a.a.empty().append(b);break;case "after":a.a.after(b)}a.C&&setTimeout(function(){return T(b)},0);a.b.$emit("templateLoaded",{compiled:a.h,template:a.c,element:a.a,variables:a.g});P(a,!0)}function T(a){U(a).forEach(function(c){var b=c.parentElement;b&&b.replaceChild(C(c.wholeText),c)})}
function U(a){for(var c=[],b=0,d=a.length;b<d;b++)B(a[b])?c.push(a[b]):c.push([].concat(g(a[b].querySelectorAll("*"))).filter(B));return c}function Q(a,c){a=a.f.TEMPLATE_STRINGS;return"object"===typeof a&&"string"===typeof a[c]?a[c]:""}function P(a,c){a.a.css("visibility",c?"visible":"hidden")};function V(a,c,b,d){this.g=a;this.h=c;this.b=b;this.i=d;this.a={};this.c=null;this.f=!1}V.prototype.run=function(){var a=this.h.defer();this.o()?this.u().then(function(){a.resolve()}):a.resolve();return a.promise};V.prototype.u=function(){var a=this;if(!this.c){var c=this.h.defer();this.c=c.promise;this.g.get(this.m(!0)).then(function(b){angular.extend(a.a,b.data);if(a.w(a.a)&&!a.f)return a.A().then(function(){c.resolve(a.a.campaign||a.a.fallback)});c.resolve(a.a.fallback)}).catch(function(){c.resolve(null)})}return this.c};
V.prototype.A=function(){var a=this;return this.g.get(this.m()).then(function(c){a.f=!0;angular.extend(a.a,c.data);return a.a},function(){return a.a})};V.prototype.m=function(a){if(a)a=this.b.a.l;else a:{a=this.b;if(a.a&&a.a.l){if(2==a.b){a=a.a.l+"-"+a.a.j;break a}if(3==a.b){a=a.a.l+"-"+a.a.v;break a}}a=void 0}return this.i.DATA_REQUEST_URL+a+".json"};V.prototype.o=function(){return this.b.c};V.prototype.w=function(a){var c=this.b;return(a.campaigns||[]).includes(2==c.b?c.a.j:c.a.v)};
V.prototype.hasCampaign=V.prototype.w;V.prototype.hasSubId=V.prototype.o;V.prototype.buildRequestUrl=V.prototype.m;V.prototype.requestCampaign=V.prototype.A;V.prototype.requestCustomizeData=V.prototype.u;V.prototype.run=V.prototype.run;V.$inject=["$http","$q","glueSubIdService","glueOctoConfig"];function W(a,c,b,d,e,h,m,n){this.h=a;this.a=c;this.f=b;this.i=d;this.g=e;this.b=h;this.s=m;this.c=n;X(this)}function X(a){a.b.o()&&a.b.u().then(function(c){var b=a.f;b=angular.isDefined(b.glueOctopus)?b.glueOctopus:null;if(c=c&&b?c[b]:null){b=c.isBudouEnabled;var d=c.data;switch(c.customization){case "copy":new D(a.a,d,b);break;case "image":new F(a.a,d);break;case "link":new G(a.a,d,b);break;case "template":new N(a.a,a.h,a.g,a.i,a.s,a.c,d,b);break;case "hide":new E(a.a)}}})}W.$inject="$scope $element $attrs $templateRequest $compile glueCustomizeService glueSubIdService glueOctoConfig".split(" ");var Y=angular.module("glueOctopusMain",[u.module.name]).directive("glueOctopus",function(){return{restrict:"A",scope:!0,controller:W,controllerAs:"mainCtrl"}});var Z=angular.module("glueOctopusCustomize",[u.module.name]).service("glueCustomizeService",V).service("glueSubIdService",M);var aa=angular.module("octopus",[x.name,Z.name,u.module.name,Y.name]);t("octopus.module.name",aa.name);t("octopus.configuration.applyConfigurationOverride",w);
}).call(this)
